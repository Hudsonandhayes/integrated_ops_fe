(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d5de07c"],{"00b9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("vs-breadcrumb",{staticClass:"ml-4",attrs:{items:t.breadcrumbs}}),a("vx-card",{attrs:{title:"Department Master List"}},[a("template",{slot:"actions"},[a("vs-button",{attrs:{color:"primary",type:"filled"},on:{click:t.create_department}},[t._v("Create Department")])],1),a("div",{staticClass:"mx-2",attrs:{slot:"no-body"},slot:"no-body"},[a("vs-table",{staticClass:"table-dark-inverted table-auto vs-con-loading__container",attrs:{search:"","max-items":"10",pagination:"",data:t.departments,stripe:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,(function(e,n){return a("vs-tr",{key:n,staticClass:"cursor-pointer",nativeOn:{click:function(a){return t.update_department(e,n)}}},[a("vs-td",{attrs:{data:e.name}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t")]),a("vs-td",{attrs:{data:e.description}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.description)+"\n\t\t\t\t\t\t\t")]),a("vs-td",{attrs:{data:e.status}},[0==e.status||!1===e.status?a("vs-chip",{attrs:{transparent:"",color:"warning"}},[t._v("disabled")]):t._e(),1==e.status||!0===e.status?a("vs-chip",{attrs:{transparent:"",color:"primary"}},[t._v("enabled")]):t._e()],1),a("vs-td",[a("vx-tooltip",{attrs:{text:"Edit",position:"left"}},[a("vs-button",{attrs:{radius:"",color:"primary",type:"border","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return t.update_department(e,n)}}})],1)],1)],1)}))}}])},[t._v("\n\t\t\t\t\t>\n\t\t\t\t\t"),a("template",{slot:"thead"},[a("vs-th",[t._v("Name")]),a("vs-th",[t._v("Description")]),a("vs-th",[t._v("Status")]),a("vs-th",[t._v("Action")])],1)],2)],1)],2)],1),a("vs-popup",{staticClass:"vs-con-loading__container clinic-create-popup",attrs:{title:t.create_department_dialog_title,active:t.popupActive,"buttons-hidden":!0},on:{"update:active":function(e){t.popupActive=e},close:t.close_edit_department_dialog}},[a("form",{attrs:{id:"department_form"}},[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"vx-row mb-3"},[a("div",{staticClass:"vx-col w-full"},[a("small",{staticClass:"label"},[t._v("Name")]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],staticClass:"w-full required",attrs:{name:"name"},model:{value:t.department.name,callback:function(e){t.$set(t.department,"name",e)},expression:"department.name"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.errors.first("name"))+"\n\t\t\t\t\t\t")])],1)]),a("div",{staticClass:"vx-row mb-3"},[a("div",{staticClass:"vx-col w-full"},[a("small",{staticClass:"label"},[t._v("Description")]),a("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"description",height:"100px"},model:{value:t.department.description,callback:function(e){t.$set(t.department,"description",e)},expression:"department.description"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("description"),expression:"errors.has('description')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("description")))])],1)]),a("div",{staticClass:"vx-row mb-3"},[a("div",{staticClass:"vx-col w-full"},[a("vs-checkbox",{attrs:{"false-value":"0","true-value":"1"},model:{value:t.department.status,callback:function(e){t.$set(t.department,"status",e)},expression:"department.status"}},[t._v("Status")])],1)]),a("div",{staticClass:"flex flex-wrap items-center justify-end mt-8"},[a("vs-button",{staticClass:"ml-auto mt-2",on:{click:function(e){return t.save_department(e)}}},[t._v("Save Changes")]),a("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"},on:{click:function(e){return t.reset_department()}}},[t._v("Reset")])],1)])],1)])],1)},s=[],i=a("ddf1"),r={name:"department-list",data:function(){return{breadcrumbs:[{title:"Home",url:"/"},{title:"Department List",url:"/pages/departments",active:!0}],create_department_dialog_title:"Create Department",popupActive:!1,editActive:!1,edit:null,editProp:{},checkBox1:!1,departments:[],department_id:-1,selected_department_index:-1,department:i["a"].department,selected_dept:{}}},components:{},methods:{onClickClinicEdit:function(t){this.$router.push({path:"/pages/client/".concat(t)})},save_department:function(t){t.preventDefault();try{var e=this;this.$validator.validateAll().then((function(t){t&&(e.$vs.loading(),-1===e.department_id?i["a"].create_department(e.department).then((function(t){var a=t.data;a&&void 0!==a&&(a.success?(e.departments.push(a.data),e.popupActive=!1,e.$vs.notify({position:"top-right",title:"Create department",text:"Saved successfully",color:"success",timing:4e3})):e.$vs.notify({title:"Create department",text:"Invalid data",color:"warning",timing:4e3})),e.$vs.loading.close()})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Create department",text:"Failed.Invalid data",color:"warning",timing:4e3})})):e.department_id>0&&(e.$vs.loading(),i["a"].update_department(e.department_id,e.department).then((function(t){var a=t.data;a&&void 0!==a&&(a.success?(e.departments[e.selected_department_index]&&e.departments.splice(e.selected_department_index,1,a.data),e.popupActive=!1,e.$vs.loading.close(),e.$vs.notify({position:"top-right",title:"Update department",text:"Saved successfully",color:"success",timing:4e3})):(e.$vs.loading.close(),e.$vs.notify({title:"Update department",text:"Invalid data",color:"warning",timing:4e3}))),e.$vs.loading.close()})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Update department",text:"Failed.Invalid data",color:"warning",timing:4e3})}))))}))}catch(a){console.log("error during form submission")}},reset_department:function(){this.department=Object.assign({},this.selected_dept),this.$validator.reset()},create_department:function(){this.department=Object.assign({},i["a"].department),this.selected_dept=Object.assign({},i["a"].department),this.selected_department_index=-1,this.department_id=-1,this.reset_department(),this.popupActive=!0},update_department:function(t,e){this.department_id=t.id||-1,this.create_department_dialog_title="Edit department",this.selected_department_index=e,this.selected_dept=Object.assign({},t),this.department=t,this.popupActive=!0},close_edit_department_dialog:function(){this.selected_department_index>=0&&this.departments.splice(this.selected_department_index,1,this.selected_dept)},get_departments:function(){var t=this;this.departments=[],this.$vs.loading(),i["a"].get_departments().then((function(e){var a=e.data;a&&void 0!==a&&(a.success?t.departments=a.data||{}:t.$vs.notify({title:"Get departments",text:"No data returned.",color:"warning",timing:4e3})),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get departments",text:"No data returned.",color:"warning",timing:4e3})}))}},created:function(){this.get_departments()}},d=r,c=(a("cb38"),a("2877")),o=Object(c["a"])(d,n,s,!1,null,"8bfe40cc",null);e["default"]=o.exports},1780:function(t,e,a){},cb38:function(t,e,a){"use strict";a("1780")},ddf1:function(t,e,a){"use strict";var n=a("d225"),s=a("b0b4"),i=a("bd86"),r=a("bb36"),d=function(){function t(){Object(n["a"])(this,t),Object(i["a"])(this,"departments",[{id:1,name:"Strategic sourcing",description:"Strategic sourcing",status:1},{id:2,name:"Purchasing",description:"Purchasing department",status:1},{id:3,name:"Accounts Payable",description:"Accounts Payable Department",status:1},{id:4,name:"Operations",description:"Operations",status:1},{id:5,name:"Contract Management",description:"",status:1}]),Object(i["a"])(this,"department",{id:0,name:"",sub_function:"",description:"",region:"",country:"",location:"",status:0}),Object(i["a"])(this,"client_department_processes",{process_ids:[],department_id:[]})}return Object(s["a"])(t,[{key:"get_all_departments",value:function(){return r["a"].get("/departments/all")}},{key:"get_departments",value:function(){return r["a"].get("/departments")}},{key:"create_department",value:function(t){return r["a"].post("/department",t)}},{key:"get_all_client_departments",value:function(t){return r["a"].get("/client/".concat(t,"/departments"))}},{key:"update_department",value:function(t,e){return r["a"].post("/department/".concat(t),e)}},{key:"get_client_department_employees",value:function(t){return r["a"].get("client/".concat(t,"/department/employees"))}},{key:"get_client_sub_functions",value:function(t){return r["a"].get("client/".concat(t,"/sub_functions"))}}]),t}();e["a"]=new d}}]);
//# sourceMappingURL=chunk-7d5de07c.f6aee090.js.map