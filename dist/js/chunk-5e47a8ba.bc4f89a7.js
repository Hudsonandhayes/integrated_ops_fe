(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e47a8ba"],{"13c1":function(t,e,o){},"31e7":function(t,e,o){"use strict";o("6493")},"386b":function(t,e,o){var i=o("5ca1"),n=o("79e5"),s=o("be13"),a=/"/g,r=function(t,e,o,i){var n=String(s(t)),r="<"+e;return""!==o&&(r+=" "+o+'="'+String(i).replace(a,"&quot;")+'"'),r+">"+n+"</"+e+">"};t.exports=function(t,e){var o={};o[t]=e(r),i(i.P+i.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",o)}},6493:function(t,e,o){},"73a8":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"kanban-app"}},[o("div",{staticClass:"flex justify-end mb-5"},[o("vs-breadcrumb",{staticClass:"flex-grow justify-start",attrs:{items:t.breadcrumbs}}),o("vs-button",{staticClass:"mr-2",attrs:{color:"primary",type:"filled"},on:{click:t.export_opportunity}},[t._v("\n\t\t\tDownload\n\t\t")]),o("vs-button",{staticClass:"mr-2",attrs:{color:"primary",type:"filled"},on:{click:t.add_new_opportunity}},[t._v("\n\t\t\tNew Opportunity\n\t\t")]),"item-list-view"==t.current_item_view?o("v-select",{staticClass:"mr-2 w-1/2",attrs:{options:t.stage_select,label:"name",reduce:function(t){return t.id},dir:t.$vs.rtl?"rtl":"ltr"},on:{input:t.changed_col_filter},model:{value:t.sel_col_select,callback:function(e){t.sel_col_select=e},expression:"sel_col_select"}}):t._e(),o("feather-icon",{staticClass:"\n\t\t\t\tp-2\n\t\t\t\tshadow-drop\n\t\t\t\trounded-lg\n\t\t\t\td-theme-dark-bg\n\t\t\t\tcursor-pointer\n\t\t\t",attrs:{icon:"GridIcon",svgClasses:{"text-primary stroke-current":"item-grid-view"==t.current_item_view}},on:{click:function(e){return t.switch_to_view(1)}}}),o("feather-icon",{staticClass:"\n\t\t\t\tp-2\n\t\t\t\tml-4\n\t\t\t\tshadow-drop\n\t\t\t\trounded-lg\n\t\t\t\td-theme-dark-bg\n\t\t\t\tcursor-pointer\n\t\t\t\thidden\n\t\t\t\tsm:inline-flex\n\t\t\t",attrs:{icon:"ListIcon",svgClasses:{"text-primary stroke-current":"item-list-view"==t.current_item_view}},on:{click:function(e){return t.switch_to_view(2)}}}),t.show_board_update?o("vs-button",{attrs:{color:"primary",type:"filled"},on:{click:t.update_process_tree}},[t._v("\n\t\t\tUpdate Board\n\t\t")]):t._e()],1),o("div",{attrs:{id:"kanban-content"}},["item-grid-view"==t.current_item_view?[o("div",{staticClass:"flex justify-start"},[o("div",{staticClass:"\n\t\t\t\t\t\tmin-h-screen\n\t\t\t\t\t\tflex\n\t\t\t\t\t\tpx-4\n\t\t\t\t\t\tpb-8\n\t\t\t\t\t\titems-start\n\t\t\t\t\t\toverflow-x-scroll\n\t\t\t\t\t"},t._l(t.columns,(function(e){return o("div",{key:e.title_id,staticClass:"\n\t\t\t\t\t\t\trounded\n\t\t\t\t\t\t\tbg-grey-light\n\t\t\t\t\t\t\tflex-no-shrink\n\t\t\t\t\t\t\tw-64\n\t\t\t\t\t\t\tp-2\n\t\t\t\t\t\t\tmr-3\n\t\t\t\t\t\t",attrs:{"data-id":e.title_id}},[o("div",{staticClass:"text-center py-1"},[o("h3",{staticClass:"text-base font-bold text-gray-700"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t")])]),o("draggable",{attrs:{list:e.tasks,animation:200,"ghost-class":"ghost-card","data-col":e.title_id,group:"tasks","empty-insert-threshold":100},on:{end:t.drop_end}},t._l(e.tasks,(function(e){return o("kanban-card",{key:e.id,staticClass:"mt-3 cursor-move",attrs:{task:e,"data-id":e.id},on:{on_card_edit:t.on_card_edit}})})),1)],1)})),0)])]:t._e(),"item-list-view"==t.current_item_view?[o("vx-card",{staticClass:"flex flex-col bg-white justify-center mt-3",attrs:{title:"List of Opportunities"}},[o("vs-table",{attrs:{search:"","max-items":"10",pagination:"",data:t.opportunity_list},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,i){return o("vs-tr",{key:i,staticClass:"cursor-pointer",nativeOn:{click:function(o){return t.update_opportunity(e,i)}}},[o("vs-td",{attrs:{data:e.name}},[t._v(t._s(e.name))]),o("vs-td",{attrs:{data:e.opportunity_stage_id}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.get_stage_label(e.opportunity_stage_id))+"\n\t\t\t\t\t\t\t")]),o("vs-td",{attrs:{data:e.lever_name}},[t._v(t._s(e.lever_name))]),o("vs-td",{attrs:{data:e.overall_goal}},[t._v(t._s(e.overall_goal))]),o("vs-td",{attrs:{data:e.owner}},[t._v(t._s(e.owner))]),o("vs-td",{attrs:{data:e.applications_impacted}},[t._v(t._s(e.applications_impacted))]),o("vs-td",{attrs:{data:e.annual_transaction_count}},[t._v(t._s(e.annual_transaction_count))]),o("vs-td",{attrs:{data:e.process_time}},[t._v(t._s(e.process_time))]),o("vs-td",{attrs:{data:e.pc_saving}},[t._v(t._s(e.pc_saving))]),o("vs-td",[o("vx-tooltip",{attrs:{text:"Edit",position:"left"}},[o("vs-button",{attrs:{radius:"",color:"primary",type:"border","icon-pack":"feather",icon:"icon-edit"},on:{click:function(o){return t.update_opportunity(e,i)}}})],1)],1)],1)}))}}],null,!1,3778776531)},[o("template",{slot:"thead"},[o("vs-th",{attrs:{"sort-key":"name"}},[t._v("Name")]),o("vs-th",{attrs:{"sort-key":"opportunity_stage_id"}},[t._v("Phase")]),o("vs-th",{attrs:{"sort-key":"lever_name"}},[t._v("Lever")]),o("vs-th",{attrs:{"sort-key":"overall_goal"}},[t._v("Overall Goal")]),o("vs-th",{attrs:{"sort-key":"owner"}},[t._v("Process Owner")]),o("vs-th",{attrs:{"sort-key":"applications_impacted"}},[t._v("Applications Impacted")]),o("vs-th",{attrs:{"sort-key":"annual_transaction_count"}},[t._v("Annual Transcation Count")]),o("vs-th",{attrs:{"sort-key":"process_time"}},[t._v("Process Time")]),o("vs-th",{attrs:{"sort-key":"pc_saving"}},[t._v("Saving")]),o("vs-th",[t._v("Action")])],1)],2)],1)]:t._e(),o("vs-sidebar",{key:t.update_ops_key,staticClass:"kanban-sidebar h-100 items-no-padding sidebarx w-100",attrs:{"position-right":"","hidden-background":!0,parent:"#kanban-content",color:"primary",spacer:""},model:{value:t.show_sidebar,callback:function(e){t.show_sidebar=e},expression:"show_sidebar"}},[o("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[o("h4",[t._v("\n\t\t\t\t\t"+t._s(this.edit_opportunity?"UPDATE":"ADD NEW")+"\n\t\t\t\t\tOPPORTUNITY\n\t\t\t\t")]),o("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){return e.stopPropagation(),t.on_close_sidebar.apply(null,arguments)}}})],1),o("vs-divider",{staticClass:"mb-0"}),o("vs-tabs",{staticClass:"overflow-y-scroll h-screen"},[o("vs-tab",{attrs:{label:"Details"}},[o("div",{staticClass:"tab-text mb-10"},[o("form",{attrs:{"data-vv-scope":"opps_form",id:"opps_form"}},[o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_spaces",expression:"'required|alpha_spaces'"}],staticClass:"w-full required",attrs:{label:"Name*",name:"name"},model:{value:t.opportunity.name,callback:function(e){t.$set(t.opportunity,"name",e)},expression:"opportunity.name"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.name"),expression:"errors.has('opps_form.name')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.name"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("span",{staticClass:"vs-input--label"},[t._v("Phase*")]),o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mr-2 w-full required",attrs:{options:t.column_select,reduce:function(t){return t.id},dir:t.$vs.rtl?"rtl":"ltr",name:"stage",label:"name"},model:{value:t.opportunity.opportunity_stage_id,callback:function(e){t.$set(t.opportunity,"opportunity_stage_id",e)},expression:"\n\t\t\t\t\t\t\t\t\t\topportunity.opportunity_stage_id\n\t\t\t\t\t\t\t\t\t"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.stage"),expression:"errors.has('opps_form.stage')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.stage"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],staticClass:"w-full required",attrs:{label:"Estimated Financial Benefit in Â£*",name:"est_financial_benefit"},model:{value:t.opportunity.est_financial_benefit,callback:function(e){t.$set(t.opportunity,"est_financial_benefit",e)},expression:"\n\t\t\t\t\t\t\t\t\t\topportunity.est_financial_benefit\n\t\t\t\t\t\t\t\t\t"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.est_financial_benefit"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t'opps_form.est_financial_benefit'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.est_financial_benefit"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("div",{staticClass:"text-sm"},[t._v("Description")]),o("vs-textarea",{staticClass:"w-full",attrs:{name:"description",height:"100px"},model:{value:t.opportunity.description,callback:function(e){t.$set(t.opportunity,"description",e)},expression:"opportunity.description"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.description"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has('opps_form.description')\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.description"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{staticClass:"w-full required",attrs:{label:"Overall Goal",name:"overall_goal"},model:{value:t.opportunity.overall_goal,callback:function(e){t.$set(t.opportunity,"overall_goal",e)},expression:"opportunity.overall_goal"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.overall_goal"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has('opps_form.overall_goal')\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.overall_goal"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full required",attrs:{label:"Raised By*",name:"owner"},model:{value:t.opportunity.owner,callback:function(e){t.$set(t.opportunity,"owner",e)},expression:"opportunity.owner"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.owner"),expression:"errors.has('opps_form.owner')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.owner"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full required",attrs:{label:"Applications Impacted*",name:"applications_impacted"},model:{value:t.opportunity.applications_impacted,callback:function(e){t.$set(t.opportunity,"applications_impacted",e)},expression:"\n\t\t\t\t\t\t\t\t\t\topportunity.applications_impacted\n\t\t\t\t\t\t\t\t\t"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.applications_impacted"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t'opps_form.applications_impacted'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.applications_impacted"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"}],staticClass:"w-full",attrs:{label:"Actual Financial Saving in Â£",name:"pc_saving",type:"number"},model:{value:t.opportunity.pc_saving,callback:function(e){t.$set(t.opportunity,"pc_saving",e)},expression:"opportunity.pc_saving"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.pc_saving"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has('opps_form.pc_saving')\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.pc_saving"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"}],staticClass:"w-full",attrs:{label:"Annual Hours Saved",name:"annual_hours_saved",type:"number"},model:{value:t.opportunity.annual_hours_saved,callback:function(e){t.$set(t.opportunity,"annual_hours_saved",e)},expression:"opportunity.annual_hours_saved"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.annual_hours_saved"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t'opps_form.annual_hours_saved'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.annual_hours_saved"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"}],staticClass:"w-full",attrs:{label:"Suitability Score",name:"process_suitability_score",type:"number"},model:{value:t.opportunity.process_suitability_score,callback:function(e){t.$set(t.opportunity,"process_suitability_score",e)},expression:"\n\t\t\t\t\t\t\t\t\t\topportunity.process_suitability_score\n\t\t\t\t\t\t\t\t\t"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.process_suitability_score"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t'opps_form.process_suitability_score'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.process_suitability_score"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-5"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"decimal:2",expression:"'decimal:2'"}],staticClass:"w-full",attrs:{label:"Complexity Score",name:"process_complexity_score",type:"number"},model:{value:t.opportunity.process_complexity_score,callback:function(e){t.$set(t.opportunity,"process_complexity_score",e)},expression:"\n\t\t\t\t\t\t\t\t\t\topportunity.process_complexity_score\n\t\t\t\t\t\t\t\t\t"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("opps_form.process_complexity_score"),expression:"\n\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t'opps_form.process_complexity_score'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.errors.first("opps_form.process_complexity_score"))+"\n\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"\n\t\t\t\t\t\t\t\t\tflex flex-wrap\n\t\t\t\t\t\t\t\t\titems-center\n\t\t\t\t\t\t\t\t\tp-3\n\t\t\t\t\t\t\t\t\txl:p-6\n\t\t\t\t\t\t\t\t\tjustify-evenly\n\t\t\t\t\t\t\t\t",attrs:{slot:"footer"},slot:"footer"},[o("vs-button",{staticClass:"mr-6",on:{click:function(e){return t.update_client_opportunity(t.opportunity)}}},[t._v("Submit\n\t\t\t\t\t\t\t\t")]),o("vs-button",{attrs:{type:"border",color:"warning"},on:{click:function(e){t.show_sidebar=!1}}},[t._v("\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t")]),t.opportunity.id>0?o("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){return t.confirm_delete_opportunity(t.opportunity)}}},[t._v("\n\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t")]):t._e()],1)])])]),t.opportunity.id>0?o("vs-tab",{attrs:{label:"Documentation"}},[o("div",{staticClass:"tab-text"},[o("vs-table",{attrs:{data:t.opportunity_documents},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,i){return o("vs-tr",{key:i,staticClass:"cursor-pointer"},[o("vs-td",{attrs:{data:e.name}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")]),o("vs-td",[o("div",{staticClass:"flex"},[o("vx-tooltip",{attrs:{text:"View",position:"left"}},[o("vs-button",{staticClass:"ml-2",attrs:{color:"primary",type:"filled","icon-pack":"feather",icon:"icon-eye",size:"small"},on:{click:function(o){return t.view_opportunity_doc(e)}}})],1),o("vx-tooltip",{attrs:{text:"Remove Doc",position:"left"}},[o("vs-button",{staticClass:"ml-2",attrs:{color:"warning",type:"filled","icon-pack":"feather",icon:"icon-archive",size:"small"},on:{click:function(o){return t.confirm_delete_document(e.id,i)}}})],1)],1)])],1)}))}}],null,!1,2907748308)},[o("template",{slot:"thead"},[o("vs-th",{staticClass:"w-4/5"},[t._v("Name*")]),o("vs-th",[t._v("Actions")])],1)],2),o("div",{staticClass:"items-center my-4"},[o("form",{attrs:{"data-vv-scope":"add_doc_form",id:"add_doc_form"}},[t.dataDoc?t._e():o("div",{staticClass:"grid upload-img m-2 row w-full"},[o("input",{ref:"uploadImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.update_opps_document}}),o("vs-button",{staticClass:"place-self-end",on:{click:function(e){return t.$refs.uploadImgInput.click()}}},[t._v("Select File")])],1),o("div",{staticClass:"grid m-2 row w-full"},[t.dataDoc?o("div",{staticClass:"\n\t\t\t\t\t\t\t\t\t\t\tw-full\n\t\t\t\t\t\t\t\t\t\t\tpx-2\n\t\t\t\t\t\t\t\t\t\t\titem-center\n\t\t\t\t\t\t\t\t\t\t\tplace-self-end\n\t\t\t\t\t\t\t\t\t\t"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.dataDoc.name)+"\n\t\t\t\t\t\t\t\t\t")]):t._e()]),o("div",{staticClass:"m-2 row w-full text-center"},[t._v("\n\t\t\t\t\t\t\t\t\tOR\n\t\t\t\t\t\t\t\t")]),o("div",{staticClass:"m-2 row w-full"},[o("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"url",expression:"'url'"}],staticClass:"w-full",attrs:{label:"External Link",name:"document-link"},model:{value:t.document.link,callback:function(e){t.$set(t.document,"link",e)},expression:"document.link"}})],1),o("div",{staticClass:"m-2 row w-full"},[o("span",{staticClass:"vs-input--label"},[t._v("Stage")]),o("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mr-2 w-full required",attrs:{name:"opportunity_stage_id",options:t.column_select,label:"name",reduce:function(t){return t.id},dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.document.opportunity_stage_id,callback:function(e){t.$set(t.document,"opportunity_stage_id",e)},expression:"\n\t\t\t\t\t\t\t\t\t\t\tdocument.opportunity_stage_id\n\t\t\t\t\t\t\t\t\t\t"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("add_doc_form.opportunity_stage_id"),expression:"\n\t\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t\t'add_doc_form.opportunity_stage_id'\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("add_doc_form.opportunity_stage_id"))+"\n\t\t\t\t\t\t\t\t\t")])],1),o("div",{staticClass:"m-2 row w-full"},[o("div",{staticClass:"text-sm"},[t._v("Document Name*")]),o("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full required",attrs:{name:"document_name"},model:{value:t.document.name,callback:function(e){t.$set(t.document,"name",e)},expression:"document.name"}}),o("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("add_doc_form.document_name"),expression:"\n\t\t\t\t\t\t\t\t\t\t\terrors.has(\n\t\t\t\t\t\t\t\t\t\t\t\t'add_doc_form.document_name'\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("add_doc_form.document_name"))+"\n\t\t\t\t\t\t\t\t\t")])],1),o("vs-button",{staticClass:"ml-auto mt-2",on:{click:function(e){return t.add_opportunity_doc()}}},[t._v("\n\t\t\t\t\t\t\t\t\tAdd Document\n\t\t\t\t\t\t\t\t")])],1)])],1)]):t._e(),t.opportunity.id>0?o("vs-tab",{attrs:{label:"Comments"}},[o("div",{staticClass:"tab-text"},[o("div",{staticClass:"m-5"},[o("div",{staticClass:"text-sm"},[t._v("Comment")]),o("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{label:"Comment"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),o("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[o("vs-button",{staticClass:"mr-6",attrs:{disabled:0===t.comment.length},on:{click:function(e){return t.update_opportunity_comment(t.comment)}}},[t._v("\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t")]),o("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.show_sidebar=!1}}},[t._v("\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t")])],1),o("vs-table",{attrs:{data:t.opportunity_comments},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return t._l(i,(function(e,i){return o("vs-tr",{key:i,staticClass:"cursor-pointer"},[o("vs-td",{attrs:{data:e.comment}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.comment)+"\n\t\t\t\t\t\t\t\t\t")]),o("vs-td",[o("div",{staticClass:"flex"},[o("vx-tooltip",{attrs:{text:"Remove Doc",position:"left"}},[o("vs-button",{staticClass:"ml-2",attrs:{color:"warning",type:"filled","icon-pack":"feather",icon:"icon-archive",size:"small"},on:{click:function(o){return t.confirm_delete_comment(e.id,i)}}})],1)],1)])],1)}))}}],null,!1,2103310542)},[o("template",{slot:"thead"},[o("vs-th",{staticClass:"w-4/5"},[t._v("Comment")]),o("vs-th",[t._v("Actions")])],1)],2)],1)]):t._e()],1)],1)],2)])},n=[],s=(o("20d6"),o("ac6a"),o("7f7f"),o("7514"),o("b76a")),a=o.n(s),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bg-white shadow rounded px-3 pt-3 pb-5 border border-white",on:{dblclick:function(e){return t.$emit("on_card_edit",t.task)}}},[o("div",{staticClass:"flex justify-between"},[o("p",{staticClass:"text-gray-700 font-semibold font-sans tracking-wide text-sm"},[t._v("\n\t\t\t"+t._s(t.task.name)+"\n\t\t")])]),o("div",{staticClass:"flex mt-4 justify-between"},[t.task.lever_name?o("vs-chip",[o("vs-avatar"),t._v("\n\t\t\t"+t._s(t.task.lever_name)+"\n\t\t")],1):t._e()],1),o("span",{staticClass:"text-sm text-gray-600"},[t._v(t._s(t.task.date))])])},c=[],l={name:"kanban-card",components:{},props:{task:{type:Object,default:function(){return{}}}},computed:{badgeColor:function(){var t={Design:"purple","Feature Request":"teal",Backend:"blue",QA:"green",default:"teal"};return t[this.task.type]||t.default}}},p=l,u=o("2877"),d=Object(u["a"])(p,r,c,!1,null,null,null),_=d.exports,m=o("c46c"),v=o("4a7a"),f=o.n(v),y=o("9d63"),h=o.n(y),g=o("7bb1"),w={custom:{applications_impacted:{required:"The Applications Impacted field is required"},est_financial_benefit:{required:"The Estimated Financial Benefit  field is required"},overall_goal:{required:"The Overall Goal field is required"}}};g["a"].localize("en",w);var b={name:"kanban-board",components:{KanbanCard:_,draggable:a.a,vSelect:f.a,VuePerfectScrollbar:h.a},data:function(){return{show_loading:!1,update_from_list:!1,new_op:!1,update_ops_key:0,client_id:-1,show_board_update:!1,current_item_view:"item-grid-view",sel_col_select:-1,opportunities:[],opportunity_list:[],column_select:[],stage_select:[],columns:[],show_sidebar:!1,edit_opportunity:!1,opportunity:{name:null,opportunity_stage_id:null,est_financial_benefit:null,overall_goal:null,applications_impacted:null,annual_transaction_count:null,process_time:null,pc_saving:null,annual_hours_saved:null,process_suitability_score:null,process_complexity_score:null},dataDoc:null,document:{name:"",opportunity_stage_id:1},token:"",comment:"",opportunity_comments:[],opportunity_documents:[],selected_opp_index:-1,selected_opp_col_index:-1,breadcrumbs:[{title:"Home",url:"/"},{title:"Clients",url:"/pages/client/".concat(this.$route.params.client_id)},{title:"Opportunity Pipeline",active:!0}]}},methods:{get_stage_label:function(t){var e=this.column_select.find((function(e){return e.id===t}));return e?e.name:"N/a"},add_opportunity_doc:function(){var t=this,e=this;this.$validator.validateAll("add_doc_form").then((function(o){o&&(m["a"].save_opportunity_file(t.opportunity.id,t.document,t.dataDoc).then((function(t){var o=t.data.data;o&&void 0!==o&&(e.opportunity_documents.push(o),e.document=[],e.dataDoc=null,e.$vs.notify({title:"Upload Successful",text:"Document has been added successfully.",iconPack:"feather",icon:"icon-alert-circle",color:"success",timing:4e3}),e.$validator.reset())})),e.$validator.reset())}))},update_opportunity_comment:function(t){if(this.comment.length>0){var e=this;this.$vs.loading(),m["a"].add_opportunity_comment(this.opportunity.id,this.comment).then((function(t){var o=t.data;o&&void 0!==o&&(o.success?(e.opportunity_comments.push(o.data),e.comment="",e.$vs.notify({title:"Save Successful",text:"Comment has been added successfully.",iconPack:"feather",icon:"icon-alert-circle",color:"success",timing:4e3})):e.$vs.notify({title:"Update comment",text:o.error,iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3})),e.$vs.loading.close()})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Failed : Opps Comment Save",text:t.message,color:"warning",timing:4e3})}))}},remove_opportunity_doc:function(t,e){var o=this;m["a"].remove_opportunity_document(t).then((function(t){console.log("remove document");var i=t.data;i&&void 0!==i&&(i.success?(o.opportunity_documents.splice(e,1),o.$vs.notify({title:"Delete Successful",text:"Opportunity Document has been deleted",iconPack:"feather",icon:"icon-alert-circle",color:"sucess",timing:4e3})):o.$vs.notify({title:"Remove opportunity document",text:i.error,iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3}))})).catch((function(t){o.$vs.notify({title:"Removing opportunity document",text:t.message,color:"warning",timing:4e3})}))},remove_opportunity_comment:function(t,e){var o=this;m["a"].remove_opportunity_comment(t).then((function(t){var i=t.data;i&&void 0!==i&&(i.success?(o.opportunity_comments.splice(e,1),o.$vs.notify({title:"Delete Successful",text:"Opportunity Comment has been deleted",iconPack:"feather",icon:"icon-alert-circle",color:"sucess",timing:4e3})):o.$vs.notify({title:"Remove comment",text:i.error,iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3}))})).catch((function(t){o.$vs.loading.close(),o.$vs.notify({title:t.message,text:"Failed",color:"warning",timing:4e3})}))},view_opportunity_doc:function(t){m["a"].open_oppportunity_file(t.document_link,t.external)},get_client_opportunities_details:function(){var t=this;m["a"].get_client_opportunities(this.client_id).then((function(e){var o=e.data.data;o&&void 0!==o&&(t.columns=o.columns,t.token=o.token,console.log("opportunities list"),o.columns.length>0&&(t.stage_select.push({id:-1,name:"All Stages"}),o.columns.forEach((function(e){var o=e.tasks||[],i=e.title_id||-1,n=e.title||"";i>-1&&n.length>0&&(t.column_select.push({id:i,name:n}),t.stage_select.push({id:i,name:n})),o.length>0&&(t.opportunity_list=o,t.sel_col_select=e.title_id)})),console.log(t.column_select)))}))},drop_end:function(t){var e=parseInt(t.to.getAttribute("data-col"),10)||-1,o=parseInt(t.item.getAttribute("data-id"),10)||-1;if(o>0&&e>0){var i={column_id:e},n=this;m["a"].move_client_opportunity(o,i).then((function(t){var i=t.data;i&&void 0!==i&&(i.success?n.columns.forEach((function(t){t.title_id===e&&t.tasks.forEach((function(t){t.id===o&&(t.opportunity_stage_id=e)}))})):n.$vs.notify({title:"Move opportunity cards",text:"Error moving opportunity cards",iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3}))})).catch((function(t){n.$vs.notify({title:"Move opportunity cards",text:"Error moving opportunity cards",color:"warning",timing:4e3})}))}},add_to_list:function(t){},on_card_edit:function(t){var e=this;this.edit_opportunity=!0,this.opportunity=t,console.log("update opportunity"),this.opportunity_documents=this.opportunity.documents,this.opportunity_comments=this.opportunity.comments,this.show_sidebar=!0,this.update_ops_key+=1,this.update_from_list=!1,this.new_op=!1,this.selected_opp_col_index=t.opportunity_stage_id||-1,this.document.opportunity_stage_id=this.opportunity.stage_id,this.$validator.pause(),this.$nextTick((function(){e.$validator.errors.clear(),e.$validator.fields.items.forEach((function(t){return t.reset()})),e.$validator.fields.items.forEach((function(t){return e.errors.remove(t)})),e.$validator.resume()}))},on_close_sidebar:function(){this.show_sidebar=!1,this.dataDoc=null},update_opportunity:function(t,e){var o=this;console.log("update opportunity"),this.edit_opportunity=!0,this.update_from_list=!0,this.opportunity=t,this.selected_opp_index=e,this.opportunity_documents=this.opportunity.documents,this.opportunity_comments=this.opportunity.comments,this.selected_opp_col_index=t.opportunity_stage_id||-1,this.document.opportunity_stage_id=this.opportunity.stage_id,this.show_sidebar=!0,this.new_op=!1,this.update_ops_key+=1,this.$validator.reset(),this.$validator.pause(),this.$nextTick((function(){o.$validator.errors.clear(),o.$validator.fields.items.forEach((function(t){return t.reset()})),o.$validator.fields.items.forEach((function(t){return o.errors.remove(t)})),o.$validator.resume()}))},add_new_opportunity:function(){var t=this;this.edit_opportunity=!1,this.opportunity=Object.assign({},m["a"].opportunity_pipeline),this.opportunity_documents=[],this.opportunity_comments=[],this.show_sidebar=!0,this.new_op=!0,this.update_ops_key+=1,this.$validator.reset(),this.$validator.pause(),this.$nextTick((function(){t.$validator.errors.clear(),t.$validator.fields.items.forEach((function(t){return t.reset()})),t.$validator.fields.items.forEach((function(e){return t.errors.remove(e)})),t.$validator.resume()}))},export_opportunity:function(){m["a"].download_oppportunity_report(this.token)},confirm_delete_document:function(t,e){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm document delete",text:"Please confirm that you wish to delete the document.",accept:this.remove_opportunity_doc,parameters:t,index:e})},confirm_delete_comment:function(t,e){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm comment delete",text:"Please confirm that you wish to delete the comment.",accept:this.remove_opportunity_comment,parameters:t,index:e})},move_opportunity:function(t){var e=this;this.opportunity.id>0&&m["a"].move_client_opportunity(this.opportunity.id,t).then((function(t){var o=t.data;o&&void 0!==o&&(o.success||e.$vs.notify({title:"Move opportunity",text:"Error moving opportunity.",iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3}))})).catch((function(t){e.$vs.notify({title:"Move opportunity",text:"Error moving opportunity",color:"warning",timing:4e3})}))},update_client_opportunity:function(t){var e=this,o=this;console.log("inside update client opp"),this.$validator.validateAll("opps_form").then((function(i){i?(e.opportunity.opportunity_stage_id>0&&(o.opportunity.id>0?(o.$vs.loading(),m["a"].update_client_opportunity(o.opportunity.id,t).then((function(t){var e=t.data;if(e&&void 0!==e)if(e.success){var i=e.data;if(o.selected_opp_col_index!==i.opportunity_stage_id?(o.columns.forEach((function(t){t.title_id===o.selected_opp_col_index&&t.tasks.forEach((function(e,o){e.id===i.id&&t.tasks.splice(o,1)})),t.title_id===i.opportunity_stage_id&&t.tasks.push(i)})),o.selected_opp_col_index=i.opportunity_stage_id):o.new_op&&o.columns.forEach((function(t){if(t.title_id===o.selected_opp_col_index){var e=t.tasks.findIndex((function(t){return t.id===i.id}));t.tasks.splice(e,1,i)}})),o.update_from_list){var n=o.opportunity_list.findIndex((function(t){return t.id===o.opportunity.id}));o.opportunity_list.splice(n,1,i)}o.sel_col_select!==o.selected_opp_col_index&&(o.sel_col_select>0&&(o.sel_col_select=o.selected_opp_col_index),o.changed_col_filter(o.sel_col_select)),o.show_sidebar=!1,o.$vs.loading.close()}else o.$vs.notify({title:"Update opportunity",text:"Invalid data",iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3}),o.$vs.loading.close();o.$vs.loading.close()})).catch((function(t){o.$vs.loading.close(),o.$vs.notify({title:"Update opportunity",text:t.message,color:"warning",timing:4e3})}))):(o.opportunity.client_id=o.client_id,m["a"].create_client_opportunity(o.opportunity).then((function(t){var e=t.data;e&&void 0!==e&&(e.success?(o.opportunity.id=e.data.id,o.selected_opp_col_index=e.data.opportunity_stage_id,o.edit_opportunity=!0,o.columns.forEach((function(t){t.title_id===o.opportunity.opportunity_stage_id&&t.tasks.push(e.data)})),o.sel_col_select!==o.opportunity.opportunity_stage_id&&(o.sel_col_select>0&&(o.sel_col_select=o.opportunity.opportunity_stage_id),o.changed_col_filter(o.sel_col_select))):o.$vs.notify({title:"Create opportunity",text:e.error,iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3})),o.$vs.loading.close()})).catch((function(t){o.$vs.loading.close(),o.$vs.notify({title:"Create opportunity",text:t.message,color:"warning",timing:4e3})})))),e.show_sidebar=!1):e.$vs.notify({title:"Select Stage",text:"Please select stage",color:"warning",timing:4e3})}))},confirm_delete_opportunity:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Opportunity Delete",text:"Please confirm that you wish to delete the Opportunity? Any data related to the Opportunity may also get deleted.",accept:this.delete_opprtunity,parameters:t})},delete_opprtunity:function(t){var e=this;if(this.opportunity.id>0){var o=e.opportunity.opportunity_stage_id;this.$vs.loading(),m["a"].delete_opportunity(this.opportunity.id).then((function(t){var i=t.data;i&&void 0!==i&&(!0===i.success?(e.columns.forEach((function(t){t.tasks.forEach((function(o,i){o.id===e.opportunity.id&&t.tasks.splice(i,1)}))})),e.update_from_list?e.opportunity_list.forEach((function(t,o){e.opportunity.id===t.id&&e.opportunity_list.splice(o,1)})):(e.sel_col_select>0&&(e.sel_col_select=o),e.changed_col_filter(e.sel_col_select)),e.$vs.notify({title:"Opportunity Removed",text:"Opportunity has been removed successfully",iconPack:"feather",icon:"icon-alert-circle",color:"primary",timing:4e3}),e.show_sidebar=!1,e.$vs.loading.close()):(e.$vs.notify({title:"Error: Removing Opportunity",text:i.error,iconPack:"feather",icon:"icon-alert-circle",color:"warning",timing:4e3}),e.$vs.loading.close()))})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Error: Removing Opportunity",text:"Invalid data",color:"warning",timing:4e3})}))}},switch_to_view:function(t){1===t?this.current_item_view="item-grid-view":2===t&&(this.current_item_view="item-list-view")},changed_col_filter:function(t){console.log("change filter"+t),this.opportunity_list=[];var e=[];this.columns.forEach((function(o){var i=o.tasks||[];-1==t?(console.log("adding item to list"),e=e.concat(i)):o.title_id===t&&i.length>0&&(e=i)})),this.opportunity_list=e},update_opps_document:function(t){this.document.opportunity_stage_id=this.opportunity.opportunity_stage_id,t.target.files&&t.target.files[0]&&(this.dataDoc=t.target.files[0])}},created:function(){this.client_id=this.$route.params.client_id||-1,this.get_client_opportunities_details()}},x=b,k=(o("31e7"),o("8692"),Object(u["a"])(x,i,n,!1,null,"5cedee78",null));e["default"]=k.exports},7514:function(t,e,o){"use strict";var i=o("5ca1"),n=o("0a49")(5),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),i(i.P+i.F*a,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o("9c6c")(s)},8692:function(t,e,o){"use strict";o("13c1")},b54a:function(t,e,o){"use strict";o("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},c46c:function(t,e,o){"use strict";o("7f7f"),o("b54a");var i=o("d225"),n=o("b0b4"),s=o("bd86"),a=o("bb36"),r=function(){function t(){Object(i["a"])(this,t),Object(s["a"])(this,"opportunity",{id:-1,name:"",short_name:"",description:"",notes:"",status:1}),Object(s["a"])(this,"opportunity_pipeline",{id:-1,date:"",title:"",type:""}),Object(s["a"])(this,"lever_opportunity",{opportunity_id:-1,lever_value_id:-1,employee_id:-1,name:"",description:"",token:""}),Object(s["a"])(this,"opportunity_options",[{id:1,label:"RPA"},{id:2,label:"OCR"},{id:3,label:"Machine Learning"},{id:4,label:"NLP"},{id:5,label:"Cognitive agent"},{id:6,label:"Smart workflow"}]),Object(s["a"])(this,"opportunities",[{id:1,name:"Robotic Process Automation",short_name:"RPA",description:"Robotic Process Automation",notes:"",status:1},{id:2,name:"Outsource/Offshoring",short_name:"OCR",description:"Outsource/Offshoring",notes:"",status:1},{id:3,name:"Machine Learning",short_name:"Machine Learning",description:"Machine Learning",notes:"",status:1},{id:4,name:"NLP",short_name:"NLP",description:"NLP",notes:"",status:1},{id:5,name:"Cognitive agent",short_name:"Cognitive agent",description:"Cognitive agent",notes:"",status:1},{id:6,name:"Smart workflow",short_name:"Smart workflow",description:"Smart workflow",notes:"",status:1}])}return Object(n["a"])(t,[{key:"get_opportunity_labels",value:function(){var t=[];return t[-1]="N/A",t[1]="RPA",t[2]="OCR",t[3]="Machine Learning",t[4]="NLP",t[5]="Cognitive agent",t[6]="Smart workflow",t}},{key:"get_levers",value:function(){return a["a"].get("/levers")}},{key:"get_opportunities",value:function(){return a["a"].get("/opportunities")}},{key:"get_client_opportunities",value:function(t){return a["a"].get("/client/".concat(t,"/opportunity-board"))}},{key:"create_opportunity",value:function(t){return a["a"].post("/opportunity",t)}},{key:"update_opportunity",value:function(t,e){return a["a"].put("/opportunity/".concat(t),e)}},{key:"delete_opportunity",value:function(t){return a["a"].delete("/opportunity/".concat(t))}},{key:"update_client_opportunity",value:function(t,e){return a["a"].post("/opportunity/".concat(t),e)}},{key:"move_client_opportunity",value:function(t,e){return a["a"].post("/client-opportunity/".concat(t),e)}},{key:"remove_opportunity_document",value:function(t){return a["a"].delete("/client-opportunity-document/".concat(t))}},{key:"create_client_opportunity",value:function(t){return a["a"].post("/opportunity",t)}},{key:"open_oppportunity_file",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)window.open(t,"_blank");else{var o="https://api-hnh.enigma-tech.in/api/client-opportunity/public/"+t;window.open(o,"_blank")}}},{key:"download_oppportunity_report",value:function(t){var e="https://api-hnh.enigma-tech.in/api"+"/client-opportunity/".concat(t,"/kanban");window.open(e,"_blank")}},{key:"save_opportunity_file",value:function(t,e,o){try{var i=new FormData;return o&&void 0!==o?(i.append("document_link",o),console.log("document file attached!")):i.append("link",e.link),i.append("name",e.name),i.append("opportunity_stage_id",e.opportunity_stage_id),a["a"].post("/client-opportunity/".concat(t,"/document"),i)}catch(n){return!1}}},{key:"add_opportunity_comment",value:function(t,e){var o=new FormData;return o.append("comment",e),a["a"].post("/client-opportunity/".concat(t,"/comment"),o)}},{key:"remove_opportunity_comment",value:function(t){return a["a"].delete("/client-opportunity-comment/".concat(t))}}]),t}();e["a"]=new r}}]);
//# sourceMappingURL=chunk-5e47a8ba.bc4f89a7.js.map