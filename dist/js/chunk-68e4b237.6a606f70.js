(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68e4b237"],{"034a":function(t,e,s){"use strict";s("706b")},"2ee4":function(t,e,s){!function(e,s){t.exports=s()}("undefined"!=typeof self&&self,(function(){return function(t){function e(a){if(s[a])return s[a].exports;var i=s[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e){t.exports=function(t,e,s,a,i,n){var r,o=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(r=t,o=t.default);var l,d="function"==typeof o?o.options:o;if(e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),s&&(d.functional=!0),i&&(d._scopeId=i),n?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=l):a&&(l=a),l){var u=d.functional,v=u?d.render:d.beforeCreate;u?(d._injectStyles=l,d.render=function(t,e){return l.call(e),v(t,e)}):d.beforeCreate=v?[].concat(v,l):[l]}return{esModule:r,exports:o,options:d}}},function(t,e,s){"use strict";var a=s(2),i=s(4),n=s(14);e.a={name:"form-wizard",components:{WizardButton:a.a,WizardStep:i.a},props:{title:{type:String,default:"Awesome Wizard"},subtitle:{type:String,default:"Split a complicated flow in multiple steps"},nextButtonText:{type:String,default:"Next"},backButtonText:{type:String,default:"Back"},finishButtonText:{type:String,default:"Finish"},hideButtons:{type:Boolean,default:!1},validateOnBack:Boolean,color:{type:String,default:"#e74c3c"},errorColor:{type:String,default:"#8b0000"},shape:{type:String,default:"circle"},layout:{type:String,default:"horizontal"},stepsClasses:{type:[String,Array],default:""},stepSize:{type:String,default:"md",validator:function(t){return-1!==["xs","sm","md","lg"].indexOf(t)}},transition:{type:String,default:""},startIndex:{type:Number,default:0,validator:function(t){return t>=0}}},provide:function(){return{addTab:this.addTab,removeTab:this.removeTab}},data:function(){return{activeTabIndex:0,currentPercentage:0,maxStep:0,loading:!1,tabs:[]}},computed:{slotProps:function(){return{nextTab:this.nextTab,prevTab:this.prevTab,activeTabIndex:this.activeTabIndex,isLastStep:this.isLastStep,fillButtonStyle:this.fillButtonStyle}},tabCount:function(){return this.tabs.length},isLastStep:function(){return this.activeTabIndex===this.tabCount-1},isVertical:function(){return"vertical"===this.layout},displayPrevButton:function(){return 0!==this.activeTabIndex},stepPercentage:function(){return 1/(2*this.tabCount)*100},progressBarStyle:function(){return{backgroundColor:this.color,width:this.progress+"%",color:this.color}},fillButtonStyle:function(){return{backgroundColor:this.color,borderColor:this.color,color:"white"}},progress:function(){return this.activeTabIndex>0?this.stepPercentage*(2*this.activeTabIndex+1):this.stepPercentage}},methods:{emitTabChange:function(t,e){this.$emit("on-change",t,e),this.$emit("update:startIndex",e)},addTab:function(t){var e=this.$slots.default.indexOf(t.$vnode);t.tabId=""+t.title.replace(/ /g,"")+e,this.tabs.splice(e,0,t),e<this.activeTabIndex+1&&(this.maxStep=e,this.changeTab(this.activeTabIndex+1,e))},removeTab:function(t){var e=this.tabs,s=e.indexOf(t);s>-1&&(s===this.activeTabIndex&&(this.maxStep=this.activeTabIndex-1,this.changeTab(this.activeTabIndex,this.activeTabIndex-1)),s<this.activeTabIndex&&(this.maxStep=this.activeTabIndex-1,this.activeTabIndex=this.activeTabIndex-1,this.emitTabChange(this.activeTabIndex+1,this.activeTabIndex)),e.splice(s,1))},reset:function(){this.maxStep=0,this.tabs.forEach((function(t){t.checked=!1})),this.navigateToTab(0)},activateAll:function(){this.maxStep=this.tabs.length-1,this.tabs.forEach((function(t){t.checked=!0}))},navigateToTab:function(t){var e=this,s=t>this.activeTabIndex;if(t<=this.maxStep){var a=function a(){s&&t-e.activeTabIndex>1?(e.changeTab(e.activeTabIndex,e.activeTabIndex+1),e.beforeTabChange(e.activeTabIndex,a)):(e.changeTab(e.activeTabIndex,t),e.afterTabChange(e.activeTabIndex))};s?this.beforeTabChange(this.activeTabIndex,a):(this.setValidationError(null),a())}return t<=this.maxStep},nextTab:function(){var t=this,e=function(){t.activeTabIndex<t.tabCount-1?(t.changeTab(t.activeTabIndex,t.activeTabIndex+1),t.afterTabChange(t.activeTabIndex)):t.$emit("on-complete")};this.beforeTabChange(this.activeTabIndex,e)},prevTab:function(){var t=this,e=function(){t.activeTabIndex>0&&(t.setValidationError(null),t.changeTab(t.activeTabIndex,t.activeTabIndex-1))};this.validateOnBack?this.beforeTabChange(this.activeTabIndex,e):e()},focusNextTab:function(){var t=Object(n.b)(this.tabs);if(-1!==t&&t<this.tabs.length-1){var e=this.tabs[t+1];e.checked&&Object(n.a)(e.tabId)}},focusPrevTab:function(){var t=Object(n.b)(this.tabs);if(-1!==t&&t>0){var e=this.tabs[t-1].tabId;Object(n.a)(e)}},setLoading:function(t){this.loading=t,this.$emit("on-loading",t)},setValidationError:function(t){this.tabs[this.activeTabIndex].validationError=t,this.$emit("on-error",t)},validateBeforeChange:function(t,e){var s=this;if(this.setValidationError(null),Object(n.c)(t))this.setLoading(!0),t.then((function(t){s.setLoading(!1);var a=!0===t;s.executeBeforeChange(a,e)})).catch((function(t){s.setLoading(!1),s.setValidationError(t)}));else{var a=!0===t;this.executeBeforeChange(a,e)}},executeBeforeChange:function(t,e){this.$emit("on-validate",t,this.activeTabIndex),t?e():this.tabs[this.activeTabIndex].validationError="error"},beforeTabChange:function(t,e){if(!this.loading){var s=this.tabs[t];if(s&&void 0!==s.beforeChange){var a=s.beforeChange();this.validateBeforeChange(a,e)}else e()}},afterTabChange:function(t){if(!this.loading){var e=this.tabs[t];e&&void 0!==e.afterChange&&e.afterChange()}},changeTab:function(t,e){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this.tabs[t],i=this.tabs[e];return a&&(a.active=!1),i&&(i.active=!0),s&&this.activeTabIndex!==e&&this.emitTabChange(t,e),this.activeTabIndex=e,this.activateTabAndCheckStep(this.activeTabIndex),!0},tryChangeRoute:function(t){this.$router&&t.route&&this.$router.push(t.route)},checkRouteChange:function(t){var e=-1,s=this.tabs.find((function(s,a){var i=s.route===t;return i&&(e=a),i}));if(s&&!s.active){var a=e>this.activeTabIndex;this.navigateToTab(e,a)}},deactivateTabs:function(){this.tabs.forEach((function(t){t.active=!1}))},activateTab:function(t){this.deactivateTabs();var e=this.tabs[t];e&&(e.active=!0,e.checked=!0,this.tryChangeRoute(e))},activateTabAndCheckStep:function(t){this.activateTab(t),t>this.maxStep&&(this.maxStep=t),this.activeTabIndex=t},initializeTabs:function(){this.tabs.length>0&&0===this.startIndex&&this.activateTab(this.activeTabIndex),this.startIndex<this.tabs.length?this.activateTabAndCheckStep(this.startIndex):window.console.warn("Prop startIndex set to "+this.startIndex+" is greater than the number of tabs - "+this.tabs.length+". Make sure that the starting index is less than the number of tabs registered")}},mounted:function(){this.initializeTabs()},watch:{"$route.path":function(t){this.checkRouteChange(t)}}}},function(t,e,s){"use strict";function a(t){s(10)}var i=s(3),n=s(11),r=s(0),o=a,c=r(i.a,n.a,!1,o,null,null);e.a=c.exports},function(t,e,s){"use strict";e.a={}},function(t,e,s){"use strict";function a(t){s(12)}var i=s(5),n=s(13),r=s(0),o=a,c=r(i.a,n.a,!1,o,null,null);e.a=c.exports},function(t,e,s){"use strict";e.a={name:"wizard-step",props:{tab:{type:Object,default:function(){}},transition:{type:String,default:""},index:{type:Number,default:0}},computed:{iconActiveStyle:function(){return{backgroundColor:this.tab.color}},stepCheckedStyle:function(){return{borderColor:this.tab.color}},errorStyle:function(){return{borderColor:this.tab.errorColor,backgroundColor:this.tab.errorColor}},stepTitleStyle:function(){return{color:this.tab.validationError?this.tab.errorColor:this.tab.color}},isStepSquare:function(){return"square"===this.tab.shape},isTabShape:function(){return"tab"===this.tab.shape}}}},function(t,e,s){"use strict";e.a={name:"tab-content",props:{title:{type:String,default:""},icon:{type:String,default:""},beforeChange:{type:Function},afterChange:{type:Function},route:{type:[String,Object]},additionalInfo:{type:Object,default:function(){}}},inject:["addTab","removeTab"],data:function(){return{active:!1,validationError:null,checked:!1,tabId:""}},computed:{shape:function(){return this.$parent.shape},color:function(){return this.$parent.color},errorColor:function(){return this.$parent.errorColor}},mounted:function(){this.addTab(this)},destroyed:function(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.removeTab(this)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(8),i=s(16),n=s(2),r=s(4);s.d(e,"FormWizard",(function(){return a.a})),s.d(e,"TabContent",(function(){return i.a})),s.d(e,"WizardButton",(function(){return n.a})),s.d(e,"WizardStep",(function(){return r.a}));var o={install:function(t){t.component("form-wizard",a.a),t.component("tab-content",i.a),t.component("wizard-button",n.a),t.component("wizard-step",r.a)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),e.default=o},function(t,e,s){"use strict";function a(t){s(9)}var i=s(1),n=s(15),r=s(0),o=a,c=r(i.a,n.a,!1,o,null,null);e.a=c.exports},function(t,e){},function(t,e){},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"wizard-btn",attrs:{tabindex:"-1",type:"button"}},[t._t("default")],2)},i=[],n={render:a,staticRenderFns:i};e.a=n},function(t,e){},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{class:{active:t.tab.active}},[s("a",{class:{disabled:!t.tab.checked},attrs:{href:"javascript:void(0)"}},[s("div",{staticClass:"wizard-icon-circle md",class:{checked:t.tab.checked,square_shape:t.isStepSquare,tab_shape:t.isTabShape},style:[t.tab.checked?t.stepCheckedStyle:{},t.tab.validationError?t.errorStyle:{}],attrs:{role:"tab",tabindex:t.tab.checked?0:"",id:"step-"+t.tab.tabId,"aria-controls":t.tab.tabId,"aria-disabled":t.tab.active,"aria-selected":t.tab.active}},[s("transition",{attrs:{name:t.transition,mode:"out-in"}},[t.tab.active?s("div",{staticClass:"wizard-icon-container",class:{square_shape:t.isStepSquare,tab_shape:t.isTabShape},style:[t.tab.active?t.iconActiveStyle:{},t.tab.validationError?t.errorStyle:{}]},[t._t("active-step",[t.tab.icon?s("i",{staticClass:"wizard-icon",class:t.tab.icon}):s("i",{staticClass:"wizard-icon"},[t._v(t._s(t.index+1))])])],2):t._e(),t._v(" "),t.tab.active?t._e():t._t("default",[!t.tab.active&&t.tab.icon?s("i",{staticClass:"wizard-icon",class:t.tab.icon}):t._e(),t._v(" "),t.tab.active||t.tab.icon?t._e():s("i",{staticClass:"wizard-icon"},[t._v(t._s(t.index+1))])])],2)],1),t._v(" "),t._t("title",[s("span",{staticClass:"stepTitle",class:{active:t.tab.active,has_error:t.tab.validationError},style:t.tab.active?t.stepTitleStyle:{}},[t._v("\n            "+t._s(t.tab.title)+"\n      ")])])],2)])},i=[],n={render:a,staticRenderFns:i};e.a=n},function(t,e,s){"use strict";function a(){return document.activeElement.id}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=a();return t.findIndex((function(t){return t.tabId===e}))}function n(t){document.getElementById(t).focus()}function r(t){return t.then&&"function"==typeof t.then}e.b=i,e.a=n,e.c=r},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vue-form-wizard",class:[t.stepSize,{vertical:t.isVertical}],on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key)?"button"in e&&2!==e.button?null:void t.focusNextTab(e):null},function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key)?"button"in e&&0!==e.button?null:void t.focusPrevTab(e):null}]}},[s("div",{staticClass:"wizard-header"},[t._t("title",[s("h4",{staticClass:"wizard-title"},[t._v(t._s(t.title))]),t._v(" "),s("p",{staticClass:"category"},[t._v(t._s(t.subtitle))])])],2),t._v(" "),s("div",{staticClass:"wizard-navigation"},[t.isVertical?t._e():s("div",{staticClass:"wizard-progress-with-circle"},[s("div",{staticClass:"wizard-progress-bar",style:t.progressBarStyle})]),t._v(" "),s("ul",{staticClass:"wizard-nav wizard-nav-pills",class:t.stepsClasses,attrs:{role:"tablist"}},[t._l(t.tabs,(function(e,a){return t._t("step",[s("wizard-step",{attrs:{tab:e,"step-size":t.stepSize,transition:t.transition,index:a},nativeOn:{click:function(e){t.navigateToTab(a)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.navigateToTab(a)}}})],{tab:e,index:a,navigateToTab:t.navigateToTab,stepSize:t.stepSize,transition:t.transition})}))],2),t._v(" "),s("div",{staticClass:"wizard-tab-content"},[t._t("default",null,null,t.slotProps)],2)]),t._v(" "),t.hideButtons?t._e():s("div",{staticClass:"wizard-card-footer clearfix"},[t._t("footer",[s("div",{staticClass:"wizard-footer-left"},[t.displayPrevButton?s("span",{attrs:{role:"button",tabindex:"0"},on:{click:t.prevTab,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.prevTab(e)}}},[t._t("prev",[s("wizard-button",{style:t.fillButtonStyle,attrs:{disabled:t.loading}},[t._v("\n              "+t._s(t.backButtonText)+"\n            ")])],null,t.slotProps)],2):t._e(),t._v(" "),t._t("custom-buttons-left",null,null,t.slotProps)],2),t._v(" "),s("div",{staticClass:"wizard-footer-right"},[t._t("custom-buttons-right",null,null,t.slotProps),t._v(" "),t.isLastStep?s("span",{attrs:{role:"button",tabindex:"0"},on:{click:t.nextTab,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.nextTab(e)}}},[t._t("finish",[s("wizard-button",{style:t.fillButtonStyle},[t._v("\n              "+t._s(t.finishButtonText)+"\n            ")])],null,t.slotProps)],2):s("span",{attrs:{role:"button",tabindex:"0"},on:{click:t.nextTab,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.nextTab(e)}}},[t._t("next",[s("wizard-button",{style:t.fillButtonStyle,attrs:{disabled:t.loading}},[t._v("\n            "+t._s(t.nextButtonText)+"\n           ")])],null,t.slotProps)],2)],2)],null,t.slotProps)],2)])},i=[],n={render:a,staticRenderFns:i};e.a=n},function(t,e,s){"use strict";var a=s(6),i=s(17),n=s(0),r=n(a.a,i.a,!1,null,null,null);e.a=r.exports},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"wizard-tab-container",attrs:{role:"tabpanel",id:t.tabId,"aria-hidden":!t.active,"aria-labelledby":"step-"+t.tabId}},[t._t("default",null,{active:t.active})],2)},i=[],n={render:a,staticRenderFns:i};e.a=n}])}))},"2f21":function(t,e,s){"use strict";var a=s("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"4ccc":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"assessment-form"}},[s("vx-card",[s("vs-breadcrumb",{staticClass:"ml-4",attrs:{items:t.breadcrumbs}}),s("form-wizard",{ref:"timing_survey_wizard",attrs:{color:"#e67e22",title:t.survey_form_wizard_title,subtitle:null,"finish-button-text":"Create survey"},on:{"on-complete":t.submit_process_timing_survey},scopedSlots:t._u([{key:"custom-buttons-left",fn:function(e){return[e.isLastStep?t._e():s("wizard-button",{staticClass:"save-exit-btn",nativeOn:{click:function(s){return t.save_and_exit(e.activeTabIndex)}}},[t._v("Save & Exit")])]}},{key:"custom-buttons-right",fn:function(e){return[e.isLastStep?s("wizard-button",{staticClass:"save-exit-btn",nativeOn:{click:function(e){return t.generate_and_send.apply(null,arguments)}}},[t._v("Generate & Send")]):t._e()]}}])},[s("tab-content",{attrs:{title:"Survey Information","before-change":t.validate_survey_info_tab}},[s("form",{attrs:{"data-vv-scope":"create_survey_form",id:"create_survey_form"}},[s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-full"},[s("small",{staticClass:"label"},[t._v("Survey Name*")]),s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{name:"survey_name",type:"text"},model:{value:t.survey.name,callback:function(e){t.$set(t.survey,"name",e)},expression:"survey.name"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("survey_name"),expression:"errors.has('survey_name')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.errors.first("survey_name"))+"\n\t\t\t\t\t\t\t")])],1)]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-1/2"},[s("small",{staticClass:"label"},[t._v("Start Date*")]),s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{type:"date",name:"start_date"},model:{value:t.survey.start_date,callback:function(e){t.$set(t.survey,"start_date",e)},expression:"survey.start_date"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("start_date"),expression:"errors.has('start_date')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.errors.first("start_date"))+"\n\t\t\t\t\t\t\t")])],1),s("div",{staticClass:"vx-col w-1/2"},[s("small",{staticClass:"label"},[t._v("End Date*")]),s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{type:"date",name:"end_date"},model:{value:t.survey.end_date,callback:function(e){t.$set(t.survey,"end_date",e)},expression:"survey.end_date"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("end_date"),expression:"errors.has('end_date')"}],staticClass:"text-danger text-sm"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.errors.first("end_date"))+"\n\t\t\t\t\t\t\t")])],1)]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-full"},[s("small",{staticClass:"label"},[t._v("Description")]),s("vs-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],attrs:{name:"Survey Description",height:"100px"},model:{value:t.survey.description,callback:function(e){t.$set(t.survey,"description",e)},expression:"survey.description"}})],1)]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-1/2"},[s("small",{staticClass:"label"},[t._v("Status")]),s("vs-checkbox",{attrs:{"false-value":"0","true-value":"1"},model:{value:t.survey.status,callback:function(e){t.$set(t.survey,"status",e)},expression:"survey.status"}},[t._v("\n\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t")])],1)]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-1/2"},[s("vs-input",{attrs:{type:"hidden",value:t.client_id,name:"client id"},model:{value:t.survey.client_id,callback:function(e){t.$set(t.survey,"client_id",e)},expression:"survey.client_id"}})],1)])])]),s("tab-content",{attrs:{title:"Process Info","before-change":t.validate_process_select}},[s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-1/2"},[s("small",{staticClass:"label"},[t._v("Select Processes Tree")]),s("v-tree",{ref:"tree",attrs:{data:t.tree_data,draggable:!1,tpl:t.tpl,multiple:!0},model:{value:t.selected_processes,callback:function(e){t.selected_processes=e},expression:"selected_processes"}})],1)])]),s("tab-content",{attrs:{title:"Participants","before-change":t.create_participants}},[s("div",{staticClass:"vx-row mb-3 flex-row items-end"},[s("div",{staticClass:"vx-col w-2/3"},[s("small",{staticClass:"label"},[t._v("Select Department")]),s("v-select",{attrs:{options:t.departments,label:"department_label"},on:{input:t.on_department_select}})],1),s("div",{staticClass:"vx-col w-1/3"},[s("small",{staticClass:"label"}),this.checked_employees.length>0?s("vs-button",{staticClass:"p-3",attrs:{color:"rgb(62, 201, 214)",type:"filled"},on:{click:function(e){return t.add_participants()}}},[t._v("\n\t\t\t\t\t\t\tAdd Survey Participants\n\t\t\t\t\t\t")]):t._e()],1)]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-full"},[s("p",{staticClass:"table-header text-base font-semibold text-gray-700"},[t._v("\n\t\t\t\t\t\t\tSelect Participants for the survey\n\t\t\t\t\t\t")]),s("div",{staticClass:"mt-4",attrs:{slot:"no-body"},slot:"no-body"},[s("vs-table",{staticClass:"table-dark-inverted",attrs:{"max-items":"20",pagination:"",multiple:"",stripe:"",data:t.participants},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a,attrs:{data:e}},[s("vs-td",{attrs:{data:e.first_name}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.first_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.last_name)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.email}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.email)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.job_title}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.job_title)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.department_label}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.department_label)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.sub_function}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.sub_function)+"\n\t\t\t\t\t\t\t\t\t\t")])],1)}))}}]),model:{value:t.checked_employees,callback:function(e){t.checked_employees=e},expression:"checked_employees"}},[s("template",{slot:"thead"},[s("vs-th",[t._v("NAME")]),s("vs-th",[t._v("EMAIL")]),s("vs-th",[t._v("JOB TITLE")]),s("vs-th",[t._v("DEPARTMENT")]),s("vs-th",[t._v("SUB DEPARTMENT")])],1)],2)],1)])]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-full"},[s("div",{staticClass:"mt-4"},[s("vs-table",{staticClass:"table-dark-inverted",attrs:{stripe:"","max-items":"10",pagination:"",data:t.selected_participants},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a,attrs:{data:e}},[s("vs-td"),s("vs-td",{attrs:{data:e.first_name}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.first_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.last_name)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.email}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.email)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.job_title}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.job_title)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.department_label}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.department_label)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.sub_function}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.sub_function)+"\n\t\t\t\t\t\t\t\t\t\t")]),s("vs-td",[s("vx-tooltip",{attrs:{text:"Delete",position:"left"}},[s("vs-button",{attrs:{radius:"",color:"primary",type:"border",icon:"delete"},on:{click:function(s){return t.confirm_delete_selected_employee(e,a)}}})],1)],1)],1)}))}}])},[s("template",{slot:"header"},[s("p",{staticClass:"table-header text-base font-semibold text-gray-700"},[t._v("\n\t\t\t\t\t\t\t\t\t\tList of Selected Participants\n\t\t\t\t\t\t\t\t\t")])]),s("template",{slot:"thead"},[s("vs-th"),s("vs-th",[t._v("NAME")]),s("vs-th",[t._v("EMAIL")]),s("vs-th",[t._v("JOB TITLE")]),s("vs-th",[t._v("DEPARTMENT")]),s("vs-th",[t._v("SUB DEPARTMENT")]),s("vs-th",[t._v("Actions")])],1)],2)],1)])])]),s("tab-content",{attrs:{title:"Summary"}},[s("h3",{staticClass:"mb-8 summary-title"},[t._v("Summary")]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-1/2 summary-info mb-6"},[s("p",[s("b",[t._v("Survey Name")]),s("span",[t._v(t._s(t.survey.name))])]),s("p",[s("b",[t._v("Start Date")]),s("span",[t._v(t._s(t._f("localdate")(t.survey.start_date)))])]),s("p",[s("b",[t._v("End Date")]),s("span",[t._v(t._s(t._f("localdate")(t.survey.end_date)))])])]),s("div",{staticClass:"vx-col w-1/2 summary-info"})]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-full"},[s("p",[s("b",[t._v("Selected Participants ")])]),s("vs-table",{attrs:{"max-items":"3",pagination:"",data:t.selected_participants},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a},[s("vs-td",{attrs:{data:e.first_name}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.first_name)+"\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.last_name)+"\n\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.email}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.email)+"\n\t\t\t\t\t\t\t\t\t")]),s("vs-td",{attrs:{data:e.phone}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.phone)+"\n\t\t\t\t\t\t\t\t\t")])],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[t._v(" Name ")]),s("vs-th",[t._v(" Email ")]),s("vs-th",[t._v(" Phone ")])],1)],2)],1)]),s("div",{staticClass:"vx-row mb-3"},[s("div",{staticClass:"vx-col w-full"},[s("p",[s("b",[t._v("Selected Processes")])]),s("vs-table",{attrs:{"max-items":"3",pagination:"",data:t.sum_processes},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a},[s("vs-td",{attrs:{data:e.name}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")])],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",[t._v(" Name ")])],1)],2)],1)])])],1),s("vs-alert",{staticClass:"success_alert",attrs:{active:t.active1,closable:"","close-icon":"close"},on:{"update:active":function(e){t.active1=e}}},[t._v("\n\t\t\tSuccessfully created Survey !\n\t\t")]),s("vs-alert",{staticClass:"error_alert",attrs:{active:t.active2,closable:"","close-icon":"close"},on:{"update:active":function(e){t.active2=e}}},[t._v("\n\t\t\tError in creating Survey !\n\t\t")])],1)],1)},i=[],n=(s("6762"),s("2fdb"),s("75fc")),r=(s("55dd"),s("ac6a"),s("7f7f"),s("2ee4")),o=(s("da93"),s("4a7a")),c=s.n(o),l=s("c134"),d=(s("ddf1"),s("2866")),u=s("b2a6"),v=s("52b7"),_=s("4e1d"),p=(s("ac36"),s("7bb1")),f={custom:{survey_name:{required:"Survey name is a required field"},start_date:{required:"Start date is a required field"},end_date:{required:"End date is a required field"}}};p["a"].localize("en",f);var m={name:"assessment-form",components:{FormWizard:r["FormWizard"],TabContent:r["TabContent"],WizardButton:r["WizardButton"],vSelect:c.a,TreeView:v["a"],VTree:_["VTree"],VSelectTree:_["VSelectTree"]},data:function(){return{breadcrumbs:[{title:"Home",url:"/"},{title:"Clients",url:"/pages/client/".concat(this.$route.params.client_id)},{title:"Survey",active:!0}],allCheck:!1,survey_form_wizard_title:"Create new Process Timing Survey",checked_employees:[],selected_participants_id:[],response_participants:[],selected_participants:[],root_processes:[],child_processes:{},departments:[],department_arr:[],processes:[],client_processes:[],participants:[],employees:[],client_survey:{},client_id:0,survey_id:-1,client_assessment_id:-1,old_assessment_id:-1,department_id:0,selected:null,assessment_emp:{employee_ids:[],status:1},assessment_process:{tree_id:0,level_id:0},level_ids:[],assessment:{client_id:-1,assessment_employee_ids:[],assessment_process_ids:[],status:1},survey:{name:"",start_date:"",end_date:"",description:"",status:1},survey_process:{client_id:0,process_tree_ids:[]},prev_selected_process_ids:[],selected_dept:{name:"",id:0},selected_processes:0,surveys:[],sum_processes:[],t_p:{name:"",id:0,children:[]},active1:!1,active2:!1,process_tree_data:[],tree_data:[],sel_resource:{},sel_resource_idx:-1}},methods:{tpl:function(){for(var t=this,e=this.$createElement,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var n=a[0],r=(a[2],a[3],n.selected?"node-title node-selected":"node-title");return n.searched&&(r+=" node-searched"),e("span",[e("span",{class:r,domProps:{innerHTML:n.title},on:{click:function(){t.$refs.tree.nodeSelected(n)}}})])},create_survey:function(t){console.log("inside the create survey"),this.save_first_step(!1)},create_participants:function(t){var e=this;return console.log("saving participants"),0!==this.selected_participants.length?(this.save_second_step(!1),!0):(e.$vs.notify({title:"Add Participants",text:"Please add participants before proceeding.",color:"warning",timing:4e3}),!1)},go_to_clients_page:function(t){var e=parseInt(t,10);this.$router.push("/pages/client/".concat(e))},go_to_assessment_page:function(t,e){var s=parseInt(t,10),a=parseInt(e,10);this.$router.push("/pages/client/".concat(s,"/survey/").concat(a))},save_first_step:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$vs.loading();var e=this,s=t;this.client_assessment_id<=0?u["a"].create_assessment_survey(this.client_id,this.survey).then((function(t){var a=t.data;if(a&&void 0!==a)if(a.success)if(e.surveys.push(a.data),e.client_assessment_id=a.data.id,e.survey_process.client_assessment_id=e.client_assessment_id,e.client_survey.name=a.data.name,e.survey_form_wizard_title="Editing Process Timing Survey : "+e.client_survey.name,s)e.$vs.loading.close(),e.go_to_clients_page(e.client_id);else{e.get_survey_processes();var i=parseInt(e.old_assessment_id,10),n=parseInt(e.client_assessment_id,10);-1===i&&i!==n&&e.$router.push("/pages/client/".concat(e.client_id,"/assessment/").concat(n))}else e.$vs.notify({title:"Create survey",text:"Failed to create survey.",color:"warning",timing:4e3});e.$vs.loading.close()})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Create survey",text:"Failed to create survey.",color:"warning",timing:4e3})})):(this.get_survey_processes(),u["a"].update_assessment(this.client_assessment_id,this.survey).then((function(t){var a=t.data;a&&void 0!==a&&(a.success?(e.surveys=a.data,s&&(e.$vs.loading.close(),e.go_to_clients_page(e.client_id))):e.$vs.notify({title:"Update survey",text:"Failed to update survey.",color:"warning",timing:4e3})),e.$vs.loading.close()})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Update survey",text:"Failed to update survey.",color:"warning",timing:4e3})})))},save_second_step:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log(this.client_assessment_id,"client assessment id");var s=this;if(e){var a=this,i=this.$refs.tree.getNodes()||[];this.survey_process.process_tree_ids=[],i.forEach((function(e){(e.halfcheck||e.checked)&&t.survey_process.process_tree_ids.push(e.id)}));var n=this.prev_selected_process_ids.sort()||[],r=this.survey_process.process_tree_ids.sort()||[];JSON.stringify(n)!=JSON.stringify(r)&&(u["a"].save_assessment_process(this.client_assessment_id,this.survey_process).then((function(t){var e=t.data;e&&void 0!==e&&a.go_to_clients_page(a.client_id)})),a.$vs.loading.close())}else u["a"].get_assessment_summary(this.client_assessment_id).then((function(t){if(t.data.success){var e=t.data;s.sum_processes=e.data.processes}else s.$vs.notify({title:"Fetch survey details",text:"No data returned.",color:"warning",timing:4e3})})).catch((function(t){s.$vs.notify({title:"Fetch survey details",text:"No data returned.",color:"warning",timing:4e3})}))},confirm_delete_selected_employee:function(t,e){this.sel_resource=t,this.sel_resource_idx=e,this.$vs.dialog({type:"confirm",color:"danger",title:"Confirm Resource Delete",text:"Please confirm that you wish to delete the Resource? Any previous data stored for the Resource may also get deleted.",accept:this.delete_selected_employee})},delete_selected_employee:function(){if(this.sel_resource.assessment_employee_id>0){this.$vs.loading();var t=this;u["a"].delete_assessment_employee(this.sel_resource.assessment_employee_id).then((function(e){var s=e.data;if(s&&void 0!==s)if(s.success){var a=t.selected_participants[t.sel_resource_idx];t.selected_participants.splice(t.sel_resource_idx,1),t.participants.push(a),t.$vs.notify({title:"Delete successful",text:"Resource has been removed!",color:"success",time:3e3,position:"top-right"})}else t.$vs.notify({title:"Delete resource",text:s.error,color:"warning",timing:4e3});t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Delete resource",text:"Failed to delete resource",color:"warning",timing:4e3})}))}},get_client_department_employees:function(){this.$vs.loading();var t=this;this.department_arr=[],u["a"].get_assessment_available_dept_employees(this.client_assessment_id).then((function(e){var s=e.data;return s&&void 0!==s&&(s.success?t.process_assessment_emp_list(s.data):t.$vs.notify({title:"Get client department employees",text:"No data returned",color:"warning",timing:4e3})),t.$vs.loading.close(),!0})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get client department employees",text:"No data returned",color:"warning",timing:4e3})}))},on_department_select:function(t){console.log("change in department"),this.department_id=t.department_id,this.selected_dept.name=t.department_label,this.selected_dept.id=t.department_id,this.filter_dept_employees()},filter_dept_employees:function(){var t=this;this.participants=[],this.department_id>0?this.employees.forEach((function(e){e.function_id===t.department_id&&t.participants.push(e)})):this.participants=Object(n["a"])(this.employees)},process_assessment_emp_list:function(t){var e=this;e.departments=t.departments,e.departments.unshift({id:-1,department_label:"Select All",department_id:-1}),e.employees=t.department_employees||[],e.selected_participants=t.assessment_employees,e.departments.forEach((function(t){e.department_arr[t.id]=t.department_label})),this.filter_dept_employees()},add_participants:function(){if(this.checked_employees.length>0){var t=this;this.$vs.loading();var e=[];this.checked_employees.forEach((function(t){e.push(t.id)}));var s={employee_ids:e};console.log(s),u["a"].create_assessment_employees(this.client_assessment_id,s).then((function(e){var s=e.data;s&&void 0!==s&&(s.success?t.process_assessment_emp_list(s.data):t.$vs.notify({title:"Add participant",text:"Failed to add participant",color:"warning",timing:4e3})),t.checked_employees=[],t.$vs.loading.close()})).catch((function(e){t.checked_employees=[],t.$vs.loading.close(),t.$vs.notify({title:"Add participant",text:"Failed to add participant",color:"warning",timing:4e3})}))}else this.$vs.notify({title:"Select participant(s)",text:"Please select one or more participant for the survey",color:"warning",timing:4e3})},get_processes:function(){var t=this;this.processes=[],d["a"].get_all_processes().then((function(e){var s=e.data;s&&void 0!==s&&s.success&&(t.processes=s.data||{})}))},get_client_processes:function(){var t=this;this.client_processes=[],this.$vs.loading(),l["a"].get_client_processes(this.client_id).then((function(e){var s=e.data;s&&void 0!==s&&(s.success?(t.client_processes=s.data||{},t.client_processes.length<=0&&t.$vs.notify({title:"Get client process.",text:"Please make sure you have resources, departments and processes tree are created.",color:"warning",timing:4e3})):t.$vs.notify({title:"Get client process.",text:"No data returned.",color:"warning",timing:4e3})),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get client process.",text:"No data returned.",color:"warning",timing:4e3})}))},process_tree:function(t,e){var s=this;this.tree_data=[];this.tree_data;this.prev_selected_process_ids=e,console.log(t,"data return"),t.forEach((function(t){var a=!!e.includes(t.id),i={id:t.id,title:t.name,selected:a,checked:a,expanded:!0,children:[]};if(t.parent_process_tree_id>0){var n=d["a"].find_tree_item(t.parent_process_tree_id,s.tree_data);n.children.push(i)}else s.tree_data.push(i)}))},get_survey_processes:function(){this.$vs.loading();var t=this;u["a"].get_assessment_process_tree(this.client_assessment_id).then((function(e){var s=e.data;if(s&&void 0!==s)if(s.success){var a=s.data.process_tree||[],i=s.data.saved_process_tree_ids||[];if(a!==[]&&i!==[]){var n=[];i.forEach((function(t){n.push(t.process_tree_id)})),t.process_tree(a,n),console.log("getting assessment process ")}}else t.$vs.notify({title:"Add some processes",text:"No data returned.",color:"warning",timing:4e3});t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get assessment process tree",text:"No data returned.",color:"warning",timing:4e3})}))},get_client_survey:function(){this.$vs.loading();var t=this;u["a"].get_assessment_survey(this.client_assessment_id).then((function(e){var s=e.data;s&&void 0!==s&&(s.success?(t.client_survey=s.data||{},t.survey=t.client_survey,t.survey&&void 0!==t.survey?t.survey_form_wizard_title="Editing Process Timing Survey : "+t.client_survey.name:t.survey_form_wizard_title="Creating new Process Timing Survey"):t.$vs.notify({title:"Get client survey",text:"No data returned",color:"warning",timing:4e3})),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get client survey",text:"No data returned.",color:"warning",timing:4e3})}))},create_survey_process:function(){var t=this;this.$vs.loading();var e=this,s=this.$refs.tree.getNodes()||[];this.survey_process.process_tree_ids=[],s.forEach((function(e){(e.halfcheck||e.checked)&&t.survey_process.process_tree_ids.push(e.id)}));var a=this.prev_selected_process_ids.sort()||[],i=this.survey_process.process_tree_ids.sort()||[];return console.log("getting assessment process "+i),JSON.stringify(a)===JSON.stringify(i)?(this.get_client_department_employees(),e.$vs.loading.close,!0):new Promise((function(t,s){u["a"].save_assessment_process(e.client_assessment_id,e.survey_process).then((function(s){var a=s.data;a&&void 0!==a?(e.get_client_department_employees(),t(!0),e.$vs.loading.close()):(e.$vs.loading.close(),e.$vs.notify({title:"Save assessment process",text:"Invalid data",color:"warning",timing:4e3}))})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Save assessment process",text:"Invalid data.",color:"warning",timing:4e3})}))})).catch((function(t){e.$vs.loading.close(),reject(t)}))},save_and_exit:function(t){0===t?this.save_first_step(!0):1===t?this.save_second_step(!0):2===t&&this.go_to_clients_page(this.client_id)},generate_and_send:function(){console.log("generate and send"),this.$vs.loading();var t=this;u["a"].create_send_assessment(this.client_assessment_id,this.assessment).then((function(e){console.log("Assessment form");var s=e.data;s&&void 0!==s&&(s.success?(t.active1=!0,setTimeout((function(){return t.go_to_assessment_page(t.client_id,t.client_assessment_id)}),2e3)):(t.$vs.notify({title:"Generate and send survey",text:"Generate/send failed.",color:"warning",timing:4e3}),t.active2=!0)),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Generate and send survey",text:"Generate/Send failed.",color:"warning",timing:4e3})}))},submit_process_timing_survey:function(){var t=this;this.$vs.loading(),u["a"].create_assessment(this.client_assessment_id,this.assessment).then((function(e){console.log("Assessment form");var s=e.data;s&&void 0!==s&&(s.success?(t.active1=!0,t.$vs.loading.close(),setTimeout((function(){return t.go_to_assessment_page(t.client_id,t.client_assessment_id)}),2e3)):(t.$vs.notify({title:"Create survey.",text:"invalid data",color:"warning",timing:4e3}),t.active2=!0)),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Create survey.",text:"Failed to create survey.",color:"warning",timing:4e3})}))},validate_survey_info_tab:function(){console.log("validating the create survey tab");var t=!1,e=[];return void 0!==this.survey.name&&0!==this.survey.name.length||(e.push("Survey Name is missing"),t=!0),void 0!==this.survey.start_date&&0!==this.survey.start_date.length||(e.push("Survey Start Date"),t=!0),void 0!==this.survey.end_date&&0!==this.survey.end_date.length||(e.push("Survey End Date"),t=!0),t?(this.$vs.notify({title:"Please provide the following details",text:e.join("<br/>"),color:"warning",timing:5e3}),!1):(this.save_first_step(!1),!0)},validate_process_select:function(){var t=this.$refs.tree.getNodes()||[],e=[];return t.forEach((function(t){(t.halfcheck||t.checked)&&e.push(t.id)})),0===e.length?(this.$vs.notify({title:"Process not selected",text:"Please select a process",color:"warning",timing:5e3}),!1):this.create_survey_process()},get_department_label:function(t){var e="";return this.department_arr[t]&&void 0!==this.department_arr[t]&&(e=this.department_arr[t]),e},resetInput:function(){this.$validator.reset()}},mounted:function(){this.participants.map((function(t){return p_name="".concat(t.first_name," ").concat(Participant.last_name)}))},created:function(){this.client_id=parseInt(this.$route.params.client_id,10)||-1,this.client_assessment_id=parseInt(this.$route.params.survey_id,10)||-1,this.old_assessment_id=parseInt(this.$route.params.survey_id,10)||-1,this.survey.client_id=this.client_id,this.survey_process.client_id=this.client_id,this.assessment.client_id=this.client_id,this.client_assessment_id>-1&&this.get_client_survey(),this.get_client_processes()},isLastStep:function(){return!!this.$refs.timing_survey_wizard&&this.$refs.timing_survey_wizard.isLastStep}},h=m,b=(s("83d1"),s("2877")),g=Object(b["a"])(h,a,i,!1,null,null,null);e["default"]=g.exports},"55dd":function(t,e,s){"use strict";var a=s("5ca1"),i=s("d8e8"),n=s("4bf8"),r=s("79e5"),o=[].sort,c=[1,2,3];a(a.P+a.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!s("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(n(this)):o.call(n(this),i(t))}})},"6c9b":function(t,e,s){},"706b":function(t,e,s){},"83d1":function(t,e,s){"use strict";s("6c9b")},"855e":function(t,e,s){},ac36:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vx-card",{staticClass:"p-2 mb-8"},[s("div",{attrs:{slot:"no-body"},slot:"no-body"},[s("vx-card",{ref:"assesment_filter",staticClass:"assement-filters by-2",attrs:{"no-shadow":"",title:"Filters",collapseAction:""}},[s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-1/4"},[s("small",{staticClass:"label"},[t._v("Process")]),s("v-select",{attrs:{options:t.process_filters,label:"name",reduce:function(t){return t.process_tree_id},dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.filter_options.process_id,callback:function(e){t.$set(t.filter_options,"process_id",e)},expression:"filter_options.process_id"}})],1),s("div",{staticClass:"vx-col w-1/4"},[s("small",{staticClass:"label"},[t._v("Employee")]),s("v-select",{attrs:{options:t.emp_filters,label:"name",reduce:function(t){return t.id},dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.filter_options.employee_id,callback:function(e){t.$set(t.filter_options,"employee_id",e)},expression:"filter_options.employee_id"}})],1),s("div",{staticClass:"vx-col w-1/4"},[s("small",{staticClass:"label"},[t._v("Department")]),s("v-select",{attrs:{options:t.dept_filters,label:"name",reduce:function(t){return t.id},dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.filter_options.department_id,callback:function(e){t.$set(t.filter_options,"department_id",e)},expression:"filter_options.department_id"}})],1),s("div",{staticClass:"vx-col w-1/4 flex justify-end self-end"},[s("vs-button",{staticClass:"mr-3",attrs:{color:"primary",type:"filled"},on:{click:t.change_filter}},[t._v("Submit")])],1)])])],1)]),s("vx-card",{staticClass:"p-2 mb-8"},[s("template",{slot:"actions"},[s("vs-button",{staticClass:"mr-3",attrs:{color:"primary",type:"filled"},on:{click:function(e){return t.download_results(t.survey_id)}}},[t._v("Download Results")])],1),s("vs-table",{staticClass:"table-dark-inverted table-auto vs-con-loading__container",attrs:{data:t.vas_data,stripe:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(t.vas_data,(function(e,i){return s("vs-tr",{key:i,staticClass:"cursor-pointer"},[s("vs-td",{attrs:{data:a[i].process_name}},[t._v(t._s(a[i].process_name))]),s("vs-td",{attrs:{data:a[i].name}},[t._v(t._s(a[i].name))]),s("vs-td",{attrs:{data:a[i].department_label}},[t._v(t._s(a[i].department_label))]),s("vs-td",{attrs:{data:a[i].sub_department}},[t._v(t._s(a[i].sub_department))]),s("vs-td",{attrs:{data:a[i].fte}},[t._v(t._s(a[i].fte))]),s("vs-td",{attrs:{data:a[i].unit_of_measure}},[t._v(t._s(a[i].unit_of_measure))]),s("vs-td",{attrs:{data:a[i].pc_time_spent}},[t._v(t._s(a[i].pc_time_spent))]),s("vs-td",{attrs:{data:a[i].min_time_spent}},[t._v(t._s(a[i].min_time_spent))]),s("vs-td",{attrs:{data:a[i].max_time_spent}},[t._v(t._s(a[i].max_time_spent))]),s("vs-td",{attrs:{data:a[i].avg_time_spent}},[t._v(t._s(a[i].avg_time_spent))]),s("vs-td",{attrs:{data:a[i].min_time_waste}},[t._v(t._s(a[i].min_time_waste))]),s("vs-td",{attrs:{data:a[i].max_time_waste}},[t._v(t._s(a[i].max_time_waste))]),s("vs-td",{attrs:{data:a[i].avg_time_waste}},[t._v(t._s(a[i].avg_time_waste))]),s("vs-td",{attrs:{data:a[i].status}},[0===a[i].status?s("vs-chip",{attrs:{transparent:"",color:"warning"}},[t._v("Disabled")]):t._e(),1===a[i].status?s("vs-chip",{attrs:{transparent:"",color:"primary"}},[t._v("Active")]):t._e()],1)],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"process_name"}},[t._v("Process")]),s("vs-th",{attrs:{"sort-key":"name"}},[t._v("Employee")]),s("vs-th",{attrs:{"sort-key":"department_label"}},[t._v("Department")]),s("vs-th",{attrs:{"sort-key":"sub_department"}},[t._v("Sub Department")]),s("vs-th",[t._v("FTE")]),s("vs-th",[t._v("Unit of Measure")]),s("vs-th",[t._v("% of time spent")]),s("vs-th",[t._v("Process Time (Min)")]),s("vs-th",[t._v("Process Time (Max)")]),s("vs-th",[t._v("Process Time (Avg)")]),s("vs-th",[t._v("Rework Time(min)")]),s("vs-th",[t._v("Rework Time(max)")]),s("vs-th",[t._v("Rework Time(avg)")]),s("vs-th",[t._v("Status")])],1)],2)],2),s("vs-popup",{staticClass:"vs-con-loading__container clinic-create-popup",attrs:{title:"Rework",active:t.rework_dialog,"buttons-hidden":!0},on:{"update:active":function(e){t.rework_dialog=e}}},[s("vx-card",{attrs:{title:"Rework breakdown"}},[s("div",{staticClass:"flex flex-wrap items-center justify-end mt-8"},[s("vs-button",{staticClass:"ml-auto mt-2",on:{click:function(e){return t.save_client(e)}}},[t._v("Save Changes")]),s("vs-button",{staticClass:"ml-4 mt-2",attrs:{type:"border",color:"warning"},on:{click:t.reset_client}},[t._v("Reset")])],1)])],1)],1)},i=[],n=(s("96cf"),s("3b8d")),r=(s("7f7f"),s("ac6a"),s("c134"),s("b2a6")),o=s("b385"),c=s("8291"),l=s("4a7a"),d=s.n(l),u={name:"survey-employee-results",data:function(){return{filter_options:{process_id:-1,employee_id:-1,department_id:-1},dept_filters:[],emp_filters:[],process_filters:[],popupActive:!1,rework_dialog:!1,editActive:!1,edit:null,editProp:{},checkBox1:!1,survey_id:-1,selected_survey_index:-1,client_id:-1,vas_data:[{id:-1,process_name:"this long process name",employee_name:"employee 1",department_label:"department 1",sub_department:"sub department",total_fte:1,pc_time_spent:10,min_time_spent:5,max_time_spent:6,avg_time_spent:7,frequency_id:1,average_volume:100,yearly_timings_multiplier:12,unit_measure_id:1,notes:"",status:1}],survey:{name:"",client_id:-1,particpants:1,fte:40,completed_participants:0,description:"",start_date:"",end_date:"",notes:"",status:0},vas:{},statuses:o["a"].get_statuses(),clinic_id:-1}},components:{VxCard:c["a"],vSelect:d.a},computed:{},methods:{change_filter:function(){console.log("submit filter "),this.get_employee_timing_results()},reset_filter:function(){this.filter_options={process_id:-1,employee_id:-1,department_id:-1}},download_results:function(t){console.log("downloading survey results ");var e=this;this.$vs.loading(),t>0&&r["a"].get_process_timing_link(t).then((function(t){var s=t.data;if(s.success){var a="/assessment/".concat(s.data.token,"/timing_result");r["a"].open_xlsx_link(a),e.$vs.loading.close()}else e.$vs.notify({title:"Download results",text:"Failed.",color:"warning",timing:4e3})})).catch((function(t){e.$vs.loading.close(),e.$vs.notify({title:"Download results",text:"Failed.",color:"warning",timing:4e3})})),e.$vs.loading.close()},reset_client:function(){},status_label:function(t){return void 0!==this.statuses[t]?this.statuses[t]:"N/A"},view_rework:function(t,e){console.log("values "+t+" id "+e),this.rework_dialog=!0},create_opportunity_survey:function(t,e){console.log(t,"client id on button click"),this.$router.push({path:"/pages/client/".concat(t,"/survey/").concat(e,"/vsaform")})},get_client_surveys:function(){var t=this;this.$vs.loading(),r["a"].get_client_surveys(this.client_id,this.survey_id).then((function(e){var s=e.data;s&&void 0!==s&&(s.success?(t.surveys=s.data||{},console.log("going to update vas data"),t.vas_data=t.surveys.response_full||{}):t.$vs.notify({title:"Get client surveys",text:"No data returned",color:"warning",timing:4e3})),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get client surveys",text:"No data returned",color:"warning",timing:4e3})}))},get_employee_timing_results:function(){var t=this;this.surveys=[],this.vas_data=[],this.$vs.loading(),r["a"].get_employee_timing_result(this.client_id,this.survey_id,this.filter_options).then((function(e){var s=e.data;s&&void 0!==s&&(s.success?(t.surveys=s.data||{},console.log(t.surveys," vas data"),console.log("going to update vas data"),t.vas_data=t.surveys.response_full||{},t.process_filters=t.surveys.client_processes,t.emp_filters=t.surveys.assessment_employees,t.dept_filters=[],t.surveys.departments.forEach((function(e){e.client_department_id&&void 0!=e.client_department_id&&t.dept_filters.push({id:e.client_department_id,name:e.name})})),t.dept_filters.push({id:-1,name:"Select Department"})):t.$vs.notify({title:"Get employee timing results",text:"No data returned",color:"warning",timing:4e3})),t.$vs.loading.close()})).catch((function(e){t.$vs.loading.close(),t.$vs.notify({title:"Get employee timing result.",text:"No data returned.",color:"warning",timing:4e3})}))}},created:function(){this.client_id=this.$route.params.client_id||-1,this.survey_id=this.$route.params.id||-1,this.vas=r["a"].vas,this.get_employee_timing_results()},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.assesment_filter.isContentCollapsed=!0,this.$refs.assesment_filter.maxHeight="1.5rem";case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},v=u,_=(s("ec3f"),s("034a"),s("2877")),p=Object(_["a"])(v,a,i,!1,null,"40ae181e",null);e["a"]=p.exports},b385:function(t,e,s){"use strict";var a=s("d225"),i=s("b0b4"),n=function(){function t(){Object(a["a"])(this,t)}return Object(i["a"])(t,[{key:"get_statuses",value:function(){var t=[];return t[0]="Not Started",t[1]="In Progress",t[2]="Completed",t[3]="Stopped",t[4]="Cancelled",t}}]),t}();e["a"]=new n},da93:function(t,e,s){},ddf1:function(t,e,s){"use strict";var a=s("d225"),i=s("b0b4"),n=s("bd86"),r=s("bb36"),o=function(){function t(){Object(a["a"])(this,t),Object(n["a"])(this,"departments",[{id:1,name:"Strategic sourcing",description:"Strategic sourcing",status:1},{id:2,name:"Purchasing",description:"Purchasing department",status:1},{id:3,name:"Accounts Payable",description:"Accounts Payable Department",status:1},{id:4,name:"Operations",description:"Operations",status:1},{id:5,name:"Contract Management",description:"",status:1}]),Object(n["a"])(this,"department",{id:0,name:"",sub_function:"",description:"",region:"",country:"",location:"",status:0}),Object(n["a"])(this,"client_department_processes",{process_ids:[],department_id:[]})}return Object(i["a"])(t,[{key:"get_all_departments",value:function(){return r["a"].get("/departments/all")}},{key:"get_departments",value:function(){return r["a"].get("/departments")}},{key:"create_department",value:function(t){return r["a"].post("/department",t)}},{key:"get_all_client_departments",value:function(t){return r["a"].get("/client/".concat(t,"/departments"))}},{key:"update_department",value:function(t,e){return r["a"].post("/department/".concat(t),e)}},{key:"get_client_department_employees",value:function(t){return r["a"].get("client/".concat(t,"/department/employees"))}},{key:"get_client_sub_functions",value:function(t){return r["a"].get("client/".concat(t,"/sub_functions"))}}]),t}();e["a"]=new o},ec3f:function(t,e,s){"use strict";s("855e")}}]);
//# sourceMappingURL=chunk-68e4b237.6a606f70.js.map